<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media to Local Blockchain</title>
    <style>
        /* Minimalist design styles (same as previous) */
        /* ... */
    </style>
</head>
<body>
    <div class="container">
        <h1>Media to Local Blockchain</h1>
        <form id="upload-form">
            <label for="media">Upload Media</label>
            <input type="file" id="media" accept="image/*,video/*" required>
        </form>
        <p id="sha256_id"></p>
        <h2>Local Blockchain Ledger</h2>
        <ul id="ledger"></ul>
    </div>
    <script>
        const mediaInput = document.getElementById('media');
        const sha256Id = document.getElementById('sha256_id');
        const ledger = document.getElementById('ledger');

        // Load existing blockchain ledger from local storage
        let blockchain = JSON.parse(localStorage.getItem('blockchain')) || [];

        document.getElementById('upload-form').addEventListener('change', async (e) => {
            const file = mediaInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = async () => {
                    const buffer = reader.result;
                    const hashArray = await crypto.subtle.digest('SHA-256', buffer);
                    const hashHex = Array.from(new Uint8Array(hashArray))
                        .map(byte => byte.toString(16).padStart(2, '0'))
                        .join('');

                    // Add media information to the blockchain ledger
                    const mediaInfo = {
                        filename: file.name,
                        type: file.type,
                        hash: hashHex,
                        timestamp: new Date().toLocaleString(),
                    };
                    blockchain.push(mediaInfo);

                    // Save blockchain ledger to local storage
                    localStorage.setItem('blockchain', JSON.stringify(blockchain));

                    // Update the ledger display
                    updateLedger();

                    sha256Id.textContent = `SHA-256 ID: ${hashHex}`;
                };
                reader.readAsArrayBuffer(file);
            } else {
                sha256Id.textContent = '';
            }
        });

        function updateLedger() {
            ledger.innerHTML = '';
            blockchain.forEach((entry, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <strong>Block ${index + 1}:</strong><br>
                    Filename: ${entry.filename}<br>
                    Type: ${entry.type}<br>
                    SHA-256: ${entry.hash}<br>
                    Timestamp: ${entry.timestamp}
                `;
                ledger.appendChild(listItem);
            });
        }
        
        // Initial update of the ledger
        updateLedger();
    </script>
</body>
</html>
